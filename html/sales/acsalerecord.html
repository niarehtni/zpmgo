<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../../css/jquery/jquery.flexigrid.css?v=1.0.1">
    <link rel="stylesheet" href="../../css/jquery/jquery.alerts.css?v=1.0.1">
    <base href="./">
    <title>登记列表</title>
</head>
<body>
<form action="../../data/acsalerecord" method="get">
    <table class="searchTable">
        <tbody>
        <tr>
            <td>所属公司</td>
            <td style="padding-left:10px">
                <select name="">
                    <option value=""></option>
                </select>
            </td>
            <td>销售人员</td>
            <td style="padding-left:10px">
                <select name="" id="">
                    <option value=""></option>
                </select>
            </td>
            <td>商品名称</td>
            <td style="padding-left:10px">
                <input type="text" name="">
            </td>
            <td>销售时间</td>
            <td>
                <input id="startTime" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,maxDate:'#F{$dp.$D(\'endTime\')}'})" readonly="">至
                <input id="endTime" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,minDate:'#F{$dp.$D(\'startTime\')}'})">
            </td>
        </tr>
        </tbody>
    </table>
</form>
<table class="listTable"></table>

<script src="../../js/jquery/jquery-1.8.3.min.js?v=1.0.1"></script>
<script src="../../js/jquery/jquery.flexigrid.js?v=1.0.1"></script>
<script src="../../plugins/My97DatePicker/WdatePicker.js?v=1.0.1"></script>
<script src="../../js/jquery/jquery.alerts.js?v=1.0.1"></script>
<script>
    $(function(){
        $("table.listTable").flexigrid(GRID);
    });
    var GRID = {
        form: $("form"),
        //sortname: "",
        //sortorder: "",
        primaryKey: "id",
        colModel: [
            {display: "产品名称", name: "productName", width: 120, sortable: true},
            {display: "标签序列号", name: "serialNo", width: 130, sortable: true},
            {display: "特殊码", name: "bindCode", width: 60, sortable: true},
            {display: "销售人员", name: "salerName", width: 100, sortable: true},
            {display: "购买者姓名", name: "customerName", width: 80, sortable: true},
            {display: "身份证号码", name: "customerCardId", width: 100, sortable: true,
                dataFormat:function(value,td,row)
                {
                    if(row.confirmStatus != 1 &&　row.customerCardId !=null){
                        return value.substr(0,4) + "************" + value.substr(value.length-2);
                    }else{
                        return value;
                    }
                }
            },
            {display:"手机号码",name:"customerTel",width:100,sortable:true,},
            {display: "购买", name: "saleDate", width: 120, sortable: true},
            {display: "确认状态", name: "confirmStatus", width: 70, sortable: true,
                dataFormat:function (value,td,row) 
                {
                    if (row.confirmStatus == 1){
                            return '<span style="color:green;">已确认</span>';
                    }
                    else{
                            return '<span style="color:red;">未确认</span>';
                    }
                }
            },
            {display: "手机端状态", name: "readStatus", width: 80, sortable: true,
                dataFormat:function (value,td,row)
                {
                    if (row.readStatus == 9 || row.readStatus == null){
                        return '<span style="color:green;">删除</span>';
                    }
                    else{
                        return '<span style="color:red;">保留</span>';    
                    }
                }
            },
            {display: "操作", name: "id", width:50, sortable: true,
                dataFormat: function(value, td, row){
                    var operation="";
                    if (row.confirmStatus != 1)
                    {
                        operation += '<span class="editBtn" title="编辑" onclick="rowEdit(this)"></span>';
                        if(row.readStatus==9 || row.readStatus == null){
                            operation += '<span class="editBtn" title="重发确认" onclick="rowResent(this)"></span>';
                        }
                    }
                    return operation;
                }
            }
        ]
    };
    var OPR = {
        edit: {
            url: "../html/sales/acsalerecordItem.html?type=edit",
            primaryKey: "id",
            name:"登记列表编辑"
        }
    };
    function rowEdit(obj){
        edit(OPR.edit, obj, true);
    }

    function rowResent(obj){
        alert("功能预留");
    }
</script>
</body>
</html>
