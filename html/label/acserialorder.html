<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../../css/jquery/jquery.flexigrid.css?v=1.0.1">
    <link rel="stylesheet" href="../../css/jquery/jquery.alerts.css?v=1.0.1">
    <base href="./">
	<title>公司列表</title>
</head>
<body>
	<form action="../../data/acserialorder" method="get">
	</form>
	<table class="listTable"></table>

	<script src="../../js/jquery/jquery-1.8.3.min.js?v=1.0.1"></script>
	<script src="../../js/jquery/jquery.flexigrid.js?v=1.0.1"></script>
	<script src="../../js/jquery/jquery.alerts.js?v=1.0.1"></script>
	<script>
	$(function(){
		$("table.listTable").flexigrid(GRID);	
	});	
	var GRID = {
		form: $("form"),
        //sortname: "",
        //sortorder: "",
        primaryKey: "id",
        showCheckBox: false,
        toolbarHide: true,
        colModel: [
        	{display: "订单编号", name: "code", width: "20%", sortable: true},
			{display: "购买公司", name: "orgName", width: "20%", sortable: true},
			{display: "标签类型", name: "serialTypeName", width: "15%", sortable: true},
			{display: "数量", name: "serialAmount", width: "15%", sortable: true},
			{display: "订单状态", name: "orderStatusName", width: "15%", sortable: true},
			{display: "绑定状态", name: "bindAmount", width: "15%", 
				dataFormat: function(value, td, row){
					var result;
					if( row.serialAmount < value || row.serialAmount == 0 ){
						result = "未绑定 0 枚";
					}else{
						result = "未绑定"+(row.serialAmount-value)+"枚";
					}
					result += "<br><span style='color:red;cursor:pointer' onclick='rowDetail(this)' title='查看详情'>查看详情</span>";
					return result;
				}
			}
        ]
	};

	function rowDetail(obj){
		var orderCode = $(obj).parents("td").siblings("[abbr='code']").find("div").text();
		detail({
			url: "../html/label/acserialinfo.html?orderCode="+orderCode,
			primaryKey: "id",
			name: "标签列表"
		}, obj, true);
	}

	</script>
</body>
</html>
