<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="styleSheet" href="../../css/framework/table.css?v=1.0.1">
    <link rel="styleSheet" href="../../css/framework/module.css?v=1.0.1">
    <link rel="stylesheet" href="../../plugins/KindEditor/themes/default/default.css">
    <base href="./">
    <title>活动信息</title>
    <style>
        .myBtn{
            display: inline-block;
            padding: 6px 12px;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.42857143;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            -webkit-border-radius: 20%;
            -khtml-border-radius: 20%;
            -moz-border-radius: 20%;
            -ms-border-radius: 20%;
            -o-border-radius: 20%;
            border-radius: 20%;
            color: #fff;
            background-color: #337ab7;
            border-color: #2e6da4;
            text-decoration:none;
            outline: none;
        }
        .myBtn:hover {
            background-color: #286090;
            border-color: #204d74;
        }
    </style>
</head>
<body>
<form action="../../data/success" method="POST">
    <div class="module" style="width: 100%;">
        <div class="title">
            <div class="item selected" v-cloak>活动信息{{PAGETITLE}}</div>
        </div>
        <div class="content">
            <div class="item selected" style="padding:10px;">
                <table class="detailTable" border="1">
                    <tr>
                        <th width="20%">标题</th>
                        <td width="80%" colspan="3">
                            <input type="text" name="heading" v-model="heading" style="width:98%;">
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">摘要</th>
                        <td width="80%" colspan="3">
                            <input type="text" name="summary" v-model="summary" style="width:98%;">
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">公司</th>
                        <td width="30%">
                            <select name="orgId" id="" v-model="orgId">
                                <option value="">{{orgName}}</option>
                            </select>
                        </td>
                        <th width="20%"></th>
                        <td width="30%">
                        </td>
                    </tr>
                    <tr>
                        <td width="20%">开始时间</td>
                        <td width="30%">
                            <input id="startTime" :value="gmtStart" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,maxDate:'#F{$dp.$D(\'endTime\')}'})" readonly="">
                        </td>
                        <td width="20%">结束时间</td>
                        <td width="30%">
                            <input id="endTime" :value="gmtEnd" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,minDate:'#F{$dp.$D(\'startTime\')}'})">
                        </td>
                    </tr>
                    <tr>
                        <td width="20%">宣传图片</td>
                        <td width="30%">
                            <input type="button" class="myBtn" value="上传产品规格" onclick="upload()">
                            注意事项：上传的图片大小不能超过 500K
                        </td>
                        <td width="20%"></td>
                        <td width="30%">
                        </td>
                    </tr>
                    <tr>
                        <td>内容</td>
                        <td colspan="3" style="height: 150px;">
                            <div v-cloak="" style="width: 98%;height: 99%;">
                                <textarea name="content" id="content" style="width: 99%;height: 99%;visibility:hidden;">
                                    {{content}}
                                </textarea>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="submit" v-if="PAGETYPE != 'detail'">
                <center>
                    <input type="button" class="saveBtn" value="保存">
                </center>
            </div>
        </div>
    </div>
    <input type="hidden" name="signature" value="好奇的、眼馋的、打算呼朋唤友掏钱买的">
</form>

<script src="../../js/jquery/jquery-1.8.3.min.js?v=1.0.1"></script>
<script src="../../plugins/Vue/Vue.js?v=1.0.1"></script>
<script src="../../plugins/My97DatePicker/WdatePicker.js?v=1.0.1"></script>
<script src="../../plugins/AjaxUploader-0.0.1.js??v=1.0.1"></script>
<script src="../../js/framework/table.js?v=1.0.1" ></script>
<script src="../../js/default.js?v=1.0.1"></script>
<script src="../../plugins/KindEditor/kindeditor-all-min.js"></script>
<script src="../../plugins/KindEditor/lang/zh-CN.js"></script>
<script>
    function upload(){
        new AjaxUploader({
            url: "http://127.0.0.1:8080/file.center/rest/o/uploads/temp",
            name: "files",
            before: function(file){
                //验证
                if(!file||["png","jpg","jpeg","gif"].indexOf(file[0].type)<0){
                    alert("请选择jpg,png,gif图片");
                    return false;
                }
                return true;
            },
            callBack:function(result){
                if(result && result.data){
                    console.log(result)
                }else{
                    alert("上传失败");
                }
            }
        });
    }
    var vmParam = $.extend(true, VMDEFAULT, {
        data: {
            img:"",
            heading:"",
            summary:"",
            orgName:"",
            status:"",
            gmtStart:"",
            gmtEnd:"",
            creator:"",
            gmtCreate:"",
            modifier:"",
            gmtModified:"",
            content:"",
            signature:"",
            orgId:""
        },
        filters: {
            date: function(value){
                return value.slice(0, 10);
            }
        }
    });
    var vm = new Vue(vmParam);
    if(TYPE != null){
        junAjax({
            url: "../../data/acactivityinfo.json",
            success: function(result){
                if(result.code != "200"){
                    alert(result.data);
                }else{
                    for(data in result.data){
                        vm[data] = result.data[data];
                    };
                    var editor;
                    KindEditor.ready(function(K) {
                        editor = K.create('textarea[name="content"]', {
                            resizeType : 1,
                            allowPreviewEmoticons : false,
                            allowImageUpload : false,
                            items : [
                                'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
                                'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                                'insertunorderedlist', '|', 'emoticons', 'image', 'link']
                        });
                    });
                }
            },
            error: function(){
                alert("网络错误 ！");
            }
        });
    }
    else
    {
        KindEditor.ready(function(K) {
            editor = K.create('textarea[name="content"]', {
                resizeType : 1,
                allowPreviewEmoticons : false,
                allowImageUpload : false,
                items : [
                    'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
                    'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                    'insertunorderedlist', '|', 'emoticons', 'image', 'link']
            });
        });
    }
</script>
</body>
</html>
