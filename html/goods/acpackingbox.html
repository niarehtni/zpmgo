<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../../css/jquery/jquery.flexigrid.css?v=1.0.1">
    <link rel="stylesheet" href="../../css/jquery/jquery.alerts.css?v=1.0.1">
    <base href="./">
    <title>包装箱列表</title>
    <style>
        html,body {
            height: 100%;
            margin: 0;
        }
        .tableOut {
            position: relative;
            height: 60%;
            min-height: 200px;
        }
        .tableOut:nth-child(2){
            height: 40%;
        }
        .formTarget {
            position: absolute;
            top: 2px;
            left: 8px;
            right: 0;
            bottom: 0;
        }
    </style>
</head>
<body>
    <div class="tableOut">
        <div id="div1" class="formTarget">
            <form id="form1" action="../../data/acpackingbox" method="get">
                <table class="searchTable">
                    <tbody>
                    <tr>
                        <td>包装箱编码</td>
                        <td >
                            <input type="text" style="width: 217px;">
                        </td>
                        <td>销往地区编号</td>
                        <td >
                            <input type="text" style="width: 217px;">
                        </td>
                        <td>销往地区名</td>
                        <td >
                            <input type="text" style="width: 217px;">
                        </td>

                    </tr>
                    <tr>
                        <td>打包时间</td>
                        <td>
                            <input id="startTime" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,maxDate:'#F{$dp.$D(\'endTime\')}'})" readonly="">
                            至<input id="endTime" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,minDate:'#F{$dp.$D(\'startTime\')}'})">
                        </td>
                        <td>发货时间</td>
                        <td>
                            <input id="startTime1" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,maxDate:'#F{$dp.$D(\'endTime1\')}'})" readonly="">
                            至<input id="endTime1" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,minDate:'#F{$dp.$D(\'startTime1\')}'})">
                        </td>
                        <td>收货时间</td>
                        <td>
                            <input id="startTime2" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,maxDate:'#F{$dp.$D(\'endTime2\')}'})" readonly="">
                            至<input id="endTime2" type="text" class="Wdate" style="width: 100px;" onfocus="WdatePicker({lang:'zh-cn',readOnly:true,minDate:'#F{$dp.$D(\'startTime2\')}'})">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </form>
            <table class="listTable"></table>
        </div>
    </div>
    <div class="tableOut">
        <div id="div2" class="formTarget">
            <form id="form2" action="../../data/acpackingboxItem.json" method="get">
                <input type="hidden" id="detail_id" name="">
            </form>
            <table id="detailTable"></table>
        </div>
    </div>

<script src="../../js/jquery/jquery-1.8.3.min.js?v=1.0.1"></script>
<script src="../../js/jquery/jquery.flexigrid.js?v=1.0.1"></script>
<script src="../../plugins/My97DatePicker/WdatePicker.js"></script>
<script src="../../js/jquery/jquery.alerts.js?v=1.0.1"></script>
<script>
    $(function(){
        $("table.listTable").flexigrid(GRID);
        $("#detailTable").flexigrid(detailGRID)
    });
    var GRID = {
        target:"#div1",
        form: $("#form1"),
        //sortname: "",
        //sortorder: "",
        primaryKey: "id",
        showCheckBox: false,
        singleSelect: true,
        trClick: rowQuery,
        colModel: [
            {display: "包装箱编码", name: "packingCode", width: "15%", sortable: true},
            {display: "销往地区编号", name: "saleCode1", width: "13%", sortable: true},
            {display: "销往地区名", name: "saleName1", width: "13%", sortable: true},
            {display: "打包时间", name: "packingTime", width: "13%", sortable: true,},
            {display: "发货时间", name: "deliverTime1", width: "13%", sortable: true},
            {display: "收货时间", name: "receiptTime", width: "13%", sortable: true},
            {display: "公司名称", name: "orgName", width: "15%", sortable: true},
            {display: "状态", name: "status", width: "5%", sortable: true,
                dataFormat:function (value,td,row)
                {
                    if (value == '9') {
                        return '<span class="valid rowBtn" title="作废"></span>';
                    } else if (value == '1') {
                        return '<span class="valid rowBtn" title="正常"></span>';
                    } else {
                        return value;
                    }
                }
            }
        ]
    };
    var detailGRID = {
        form: $("#form2"),
        target: "#div2",
        primaryKey: "id",
        toolbarHide: true,
        showCheckBox: false,
        colModel: [
            {display: "产品名称", name: "productName", width: 100, sortable: true},
            {display: "公司名称", name: "orgName", width: 150, sortable: true},
            {display: "规格型号", name: "standard", width: 70, sortable: true},
            {display: "条形码", name: "barcode", width: 70, sortable: true,},
            {display: "序列号", name: "serialNo", width: 70, sortable: true},
            {display: "物流码", name: "transCode", width: 70, sortable: true},
            {display: "地区号", name: "saleArea", width: 70, sortable: true},
            {display: "销售地区", name: "saleAreaName", width: 100, sortable: true},
            {display: "出厂时间", name: "produceDate", width:120, sortable: true},
            {display: "验证次数", name: "verifyTimes", width: 50, sortable: true}
        ]
    };

    function rowQuery(tr){
        var id = $(tr).attr("primarykey");
        $("#detail_id").val(id);
        $('#detailTable').flexReload();
    }
</script>
</body>
</html>
