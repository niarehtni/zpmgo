<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="styleSheet" href="../../css/framework/table.css?v=1.0.1">
    <link rel="styleSheet" href="../../css/framework/module.css?v=1.0.1">
    <base href="./">
    <title>记录详情</title>
    <style>
        .ftitle {
            font-size: 14px;
            font-weight: bold;
            padding: 5px 0;
            margin: 10px 0;
            border-bottom: 1px solid #ccc;
        }
        .flex-table {
            width: 100%;
            border-collapse:collapse;
            table-layout: fixed;
            font-size: 12px;
        }
        .flex-table th,.flex-table td{
            border: 1px solid #d9d9d9;
            border-width: 0 1px 1px 0;
            text-align: center;
            font-size: 12px !important;
            line-height: 18px;
            padding: 1px;
            -webkit-box-sizing: content-box;
            -moz-box-sizing: content-box;
            box-sizing: content-box;
        }
        .flex-table th {
            background-color: #E8F2FF;
        }
        .table-out {
            width: 100%;
            max-height: 200px;
            overflow: auto;
        }
        .table-container {
            border: 1px solid #d9d9d9;
        }
        .flex-table-head-inner {
            float: left;
            background-color: #E8F2FF;
        }
        .flex-table-head {
            overflow: hidden;
        }
    </style>
</head>
<body>
<form action="../../data/success" method="POST">
    <div class="module" style="width: 100%;">
        <div class="title">
            <div class="item selected" v-cloak>绑定记录{{PAGETITLE}}</div>
        </div>
        <div class="content">
            <div class="item selected" style="padding:10px;">
                <table class="detailTable" border="1">
                    <tr>
                        <th width="20%">标签序列号</th>
                        <td width="30%">
                            <input type="text" name="serialNo" title="标签序列号" class=" null" v-model="serialNo" v-cloak v-if="!ISDETAIL">
                            <span v-cloak v-else>{{serialNo}}</span>
                        </td>
                        <th width="20%">绑定时间</th>
                        <td width="30%">
                            <input type="text" name="bindTime" v-model="bindTime" v-cloak v-if="!ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{bindTimeString}}</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">产品码</th>
                        <td width="30%">
                            <select name="productCode" v-model="productCode" v-cloak v-if="!ISDETAIL">
                                <option></option>
                            </select>
                            
                            <span v-cloak v-else>{{productCode}}</span>
                        </td>
                        <th width="20%">产品名</th>
                        <td width="30%">
                            <input type="text" name="productName" v-model="productName" v-if="!ISDETAIL" :disabled="ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{productName}}</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">销往地区码</th>
                        <td width="30%">
                            <input type="text" name="districtCode" title="销往地区码" class=" null" v-model="districtCode" v-if="!ISDETAIL">
                            <span v-cloak v-else>{{districtCode}}</span>
                        </td>
                        <th width="20%">销往地区名</th>
                        <td width="30%">
                            <input type="text" name="districtName" v-model="districtName" v-cloak v-if="!ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{districtName}}</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">绑定状态</th>
                        <td width="30%">
                            <input type="text" name="bindResult" v-model="bindResult" v-cloak v-if="!ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{bindResult}}</span>
                        </td>
                        <th width="20%">失败原因</th>
                        <td width="30%">
                            <input type="text" name="failedInfo" v-model="failedInfo" v-cloak v-if="!ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{failedInfo}}</span>
                        </td>
                    </tr>
                    <tr>
                        <th width="20%">绑定人</th>
                        <td width="30%">
                            <input type="text" name="bindUserName" v-model="bindUserName" v-cloak v-if="!ISDETAIL" readonly="readonly">
                            <span v-cloak v-else>{{bindUserName}}</span>
                        </td>
                        <th width="20%"></th>
                        <td width="30%">
                        </td>
                    </tr>
                </table>
                <div class="ftitle">绑定历史</div>
                <div class="table-container">
                    <div class="table-out flex-table-head" id="table-head">
                        <div class="flex-table-head-inner">
                            <table class="flex-table">
                                <colgroup>
                                    <col span="8" style="width:12.5%">
                                </colgroup>
                                <tr>
                                    <th>标签序列号</th>
                                    <th>产品码</th>
                                    <th>产品名</th>
                                    <th>绑定时间</th>
                                    <th>销往地区号</th>
                                    <th>销往地区名</th>
                                    <th>失败原因</th>
                                    <th>绑定人</th>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="table-out flex-table-body" id="table-body">
                        <table class="flex-table">
                            <colgroup>
                                <col span="8" style="width:12.5%">
                            </colgroup>
                            <tr v-for="item in bindHistory">
                                <td>{{item.serialNo}}</td>
                                <td>{{item.productCode}}</td>
                                <td>{{item.productName}}</td>
                                <td>{{item.bindTimeString}}</td>
                                <td>{{item.districtCode}}</td>
                                <td>{{item.districtName}}</td>
                                <td>{{item.failedInfo}}</td>
                                <td>{{item.bindUserName}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="submit" v-if="PAGETYPE != 'detail'">
                <center>
                    <input type="button" class="saveBtn" value="绑定">
                </center>
            </div>
        </div>
    </div>
</form>

<script src="../../js/jquery/jquery-1.8.3.min.js?v=1.0.1"></script>
<script src="../../plugins/Vue/Vue.js?v=1.0.1"></script>
<script src="../../plugins/My97DatePicker/WdatePicker.js?v=1.0.1"></script>
<script src="../../js/framework/table.js?v=1.0.1" ></script>
<script src="../../js/default.js?v=1.0.1"></script>
<script>
    var vmParam = $.extend(true, VMDEFAULT, {
        data: {
            "bindResult": "",
            "bindState": "",
            "bindTime": "",
            "bindTimeString": "",
            "bindUserId": "",
            "bindUserName": "",
            "creator": "",
            "gmtCreate": "",
            "id": "",
            "order": "",
            "orgName": "",
            "productCode": "",
            "productName": "",
            "serialNo": "",
            "sort": "",
            "sortFieldType": "",
            "status": "",
            "districtCode":"",
            "districtName":"",
            "failedInfo":"",
            "bindHistory":[],
            scrollbarWidth: null
        },
        methods: {
            measureScrollbar: function(){
                if(this.scrollbarWidth == null){
                    var scrollDiv = document.createElement("div");
                    scrollDiv.className = "jun-scrollbar-measure";
                    document.body.appendChild(scrollDiv);
                    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
                    document.body.removeChild(scrollDiv);
                    this.scrollbarWidth = scrollbarWidth;
                }
                return this.scrollbarWidth;
            },
            setHead: function(){
                if(document.getElementById("table-body").scrollHeight > document.getElementById("table-body").clientHeight ){
                    $(".flex-table-head-inner").css("padding-right",this.measureScrollbar());
                }
            }
        }
    });
    var vm = new Vue(vmParam);
    if(TYPE != null){
        junAjax({
            url: "../../data/acproductbindrecordItem.json",
            success: function(result){
                if(result.code != "200"){
                    alert(result.data);
                }else{
                    for(data in result.data){
                        vm[data] = result.data[data];
                    }
                    setTimeout(function(){
                        vm.setHead();
                    },0);
                }
            },
            error: function(){
                alert("网络错误 ！");
            }
        });
    }
</script>
</body>
</html>
